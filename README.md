# TravelJournalDB

р╕гр╕░р╕Ър╕Ър╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╣Ар╕Фр╕┤р╕Щр╕Чр╕▓р╕З (Travel Journal Database)

---

## ЁЯУЛ р╕ар╕▓р╕Юр╕гр╕зр╕б

**TravelJournalDB** р╣Ар╕Ыр╣Зр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е SQL Server р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╣Ар╕Фр╕┤р╕Щр╕Чр╕▓р╕З р╕Ыр╕гр╕░р╕Бр╕нр╕Ър╕Фр╣Йр╕зр╕в:

- р╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е `TravelJournalDB`
- р╕гр╕▒р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М **DDL** (р╕Хр╕▓р╕гр╕▓р╕З/р╕нр╕┤р╕Щр╣Ар╕Фр╣Зр╕Бр╕Лр╣М/р╕Др╕╡р╕вр╣М/р╕зр╕┤р╕з/р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ/р╕кр╣Вр╕Хр╕гр╣Мр╣Вр╕Ыр╕гр╕Лр╕╡р╣Ар╕вр╕нр╕гр╣М/р╕Чр╕гр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М) 
- р╕гр╕▒р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М **DML** (р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╣Бр╕ер╕░р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б)
---

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕гр╕▒р╕Щ (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕нр╕Ър╕Цр╕▒р╕Фр╣Др╕Ы/р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕нр╕╖р╣Ир╕Щ)

### 1) р╕Ьр╣Ир╕▓р╕Щ SQL Server Management Studio (SSMS)
1. р╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е р╣Гр╕лр╣Йр╕Чр╕│р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕З тАЬDatabase name : `TravelJournalDB` р╕Фр╕╣р╕Вр╣Йр╕н2
2. тАЭр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ `Collation:` р╣Ар╕Ыр╣Зр╕Щ `Thai_CI_AS` р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╕гр╕нр╕Зр╕гр╕▒р╕Ър╕нр╕▒р╕Бр╕Вр╕гр╕░р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в
3. р╣Ар╕Ыр╕┤р╕Фр╣Др╕Яр╕ер╣М `SQL_DDL_DML_DQL/schema.sql` р╣Бр╕ер╣Йр╕зр╕Бр╕Ф **Execute**
4. р╣Ар╕Ыр╕┤р╕Фр╣Др╕Яр╕ер╣М `SQL_DDL_DML_DQL/programmability.sql` р╣Бр╕ер╣Йр╕зр╕Бр╕Ф **Execute**
5. р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕│р╣Ар╕гр╣Зр╕И р╣Ар╕Ыр╕┤р╕Фр╣Др╕Яр╕ер╣М `SQL_DDL_DML_DQL/DML.sql` р╣Бр╕ер╣Йр╕зр╕Бр╕Ф **Execute**

---

## ЁЯЧДя╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Фр╕вр╕кр╕гр╕╕р╕Ы (р╕Ир╕▓р╕Б DDL)

### Tables (р╕Хр╕▓р╕гр╕▓р╕З)
- `Users` - р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
- `TravelEntries` - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╣Ар╕Фр╕┤р╕Щр╕Чр╕▓р╕З
- `Locations` - р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕Цр╕▓р╕Щр╕Чр╕╡р╣И
- `EntryLocations` - р╕Др╕зр╕▓р╕бр╕кр╕▒р╕бр╕Юр╕▒р╕Щр╕Шр╣Мр╕гр╕░р╕лр╕зр╣Ир╕▓р╕З Entry р╣Бр╕ер╕░ Location
- `LocationStatistics` - р╕кр╕Цр╕┤р╕Хр╕┤р╕Бр╕▓р╕гр╣Ар╕вр╕╡р╣Ир╕вр╕бр╕Кр╕бр╕кр╕Цр╕▓р╕Щр╕Чр╕╡р╣И
- `ActivityLogs` - р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ
- `UserActivityLogs` - р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Бр╕Хр╣Ир╕ер╕░р╕Др╕Щ

### Views (р╕зр╕┤р╕з)
- `vw_PopularLocations` - р╕кр╕Цр╕▓р╕Щр╕Чр╕╡р╣Ир╕вр╕нр╕Фр╕Щр╕┤р╕вр╕б
- `vw_UserUniqueLocations` - р╕Ир╕│р╕Щр╕зр╕Щр╕кр╕Цр╕▓р╕Щр╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Лр╣Йр╕│р╕Чр╕╡р╣Ир╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕Др╕вр╣Др╕Ы
- `vw_UserStatsSummary` - р╕кр╕гр╕╕р╕Ыр╕кр╕Цр╕┤р╕Хр╕┤р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### Function (р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ)
- `fn_GetActivityCountByDateRange` - р╕Щр╕▒р╕Ър╕Ир╕│р╕Щр╕зр╕Щр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╣Гр╕Щр╕Кр╣Ир╕зр╕Зр╣Ар╕зр╕ер╕▓

### Stored Procedures (р╕кр╣Вр╕Хр╕гр╣Мр╣Вр╕Юр╕гр╕Лр╕╡р╣Ар╕Ир╕нр╕гр╣М)
- `sp_RegisterUser` - р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕лр╕бр╣И
- `sp_LoginUser` - р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ
- `sp_AddTravelEntry` - р╣Ар╕Юр╕┤р╣Ир╕бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╣Ар╕Фр╕┤р╕Щр╕Чр╕▓р╕З
- `sp_UpdateLocationStatistics` - р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕кр╕Цр╕┤р╕Хр╕┤р╕кр╕Цр╕▓р╕Щр╕Чр╕╡р╣И
- `sp_LogUserActivity` - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- р╕пр╕ер╕п

### Trigger (р╕Чр╕гр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М)
- `trg_UpdateStatsAfterEntry` - р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕кр╕Цр╕┤р╕Хр╕┤р╕кр╕Цр╕▓р╕Щр╕Чр╕╡р╣Ир╣Бр╕Ър╕Ъ set-based р╕лр╕ер╕▒р╕З INSERT р╕Чр╕╡р╣И `EntryLocations`

---

## тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ьр╕ер╕лр╕ер╕▒р╕Зр╕гр╕▒р╕Щ (DQL р╣Бр╕Щр╕░р╕Щр╕│)

### р╕гр╕зр╕бр╕вр╕нр╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

```sql
USE TravelJournalDB;

SELECT 
  (SELECT COUNT(*) FROM dbo.Users)              AS TotalUsers,
  (SELECT COUNT(*) FROM dbo.TravelEntries)      AS TotalEntries,
  (SELECT COUNT(*) FROM dbo.Locations)          AS TotalLocations,
  (SELECT COUNT(*) FROM dbo.UserActivityLogs)   AS TotalUserActivities,
  (SELECT COUNT(*) FROM dbo.ActivityLogs)       AS TotalActivities;
```

### р╕Фр╕╣ Top р╕кр╕Цр╕▓р╕Щр╕Чр╕╡р╣Ир╕вр╕нр╕Фр╕Щр╕┤р╕вр╕б

```sql
SELECT TOP (10) 
  L.LocationName, 
  LS.VisitCount, 
  LS.AverageRating, 
  LS.PopularityScale
FROM dbo.LocationStatistics LS
JOIN dbo.Locations L ON L.LocationID = LS.LocationID
ORDER BY LS.VisitCount DESC, LS.AverageRating DESC;
```

### р╕Фр╕╣р╕кр╕гр╕╕р╕Ыр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й

```sql
SELECT * 
FROM dbo.vw_UserStatsSummary 
ORDER BY CreatedDate DESC;
```

---

## ЁЯСд р╕Ър╕▒р╕Нр╕Кр╕╡р╕Чр╕Фр╕кр╕нр╕Ъ (р╕Ир╕▓р╕Б DML)

| Username | Password |
|----------|----------|
| `admin` | `password123` |
| `john_doe` | `password123` |
| `jane_smith` | `password123` |

> тЪая╕П **р╕Др╕│р╣Ар╕Хр╕╖р╕нр╕Щ:** р╣Гр╕Кр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ

---

## ЁЯУБ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М

```
TravelJournalDB/
тФФтФА SQL_DDL_DML_DQL/
   тФЬтФА DDL/
   тФВ   тФЬтФА schema.sql            # р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕З/р╕Др╕╡р╕вр╣М/р╕Фр╕▒р╕Кр╕Щр╕╡ (DDL)
   тФВ   тФФтФА programmability.sql   # Views / Stored Procedures / Functions / Triggers (DDL)
   тФЬтФА DML/
   тФВ   тФФтФА data.sql              # р╣Гр╕кр╣Ир╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З/р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б (DML)
   тФФтФА DQL/
       тФФтФА verify.sql            # р╕Др╕┤р╕зр╕гр╕╡р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ьр╕е (DQL)

```
**Last Updated:** November 2025
